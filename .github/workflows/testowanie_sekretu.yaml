name: Testowanie sekretu

on:
  workflow_dispatch:

jobs:
  testy_sekretu:
    runs-on: ubuntu-latest
    environment:
      name: 'Testowe'


    steps:
      - name: Test sekretu repozytorium
        run: echo "Sekret repozytorium to ${{ secrets.Testowy_sekret_repo }}"
        
      - name: Test zmiennej repozytorium
        run: echo "Zmienna repozytorium to ${{ vars.Testowa_zmienna_repo }}"

      - name: Test sekretu srodowiska
        run: echo "Sekret srodowiska to ${{ secrets.sekret_srodowiska }}"   
        
      - uses: actions/checkout@v4

      - name: Odszyfrowanie pliku
        run: |
          mkdir $HOME/secrets
          gpg --quiet --batch --yes --decrypt --passphrase="${{ secrets.HASLO_GPG1 }}" --output $HOME/secrets/sekret.json sekret.json.gpg 

      - name: PodglÄ…d pliku odszyfrowanego
        run: cat $HOME/secrets/sekret.json